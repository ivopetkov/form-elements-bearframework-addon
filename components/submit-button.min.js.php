<?php

/*
 * Form elements addon for Bear Framework
 * https://github.com/ivopetkov/form-elements-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.formElementsSubmitButton=ivoPetkov.bearFrameworkAddons.formElementsSubmitButton||{onClick:function(e,t,r,i){for(var s=e;s&&"form"!==s.tagName.toLowerCase();)s=s.parentNode;if(s&&(void 0===e.disableNextClick||!e.disableNextClick)){var o=s,n=()=>{e.disableNextClick=!0,void 0===e.originalInnerText&&(e.originalInnerText=e.innerText),void 0===e.originalClass&&(e.originalClass=e.getAttribute("class")),r.length>0&&e.setAttribute("class",r),t.length>0&&(e.innerText=t),e.setAttribute("disabled","true"),e.style.cursor="default"},a=t=>{o.removeEventListener("submitstart",n),o.removeEventListener("submitsuccess",l),o.removeEventListener("submiterror",v),t&&!i||(e.disableNextClick=!1,e.innerText=e.originalInnerText,e.removeAttribute("disabled"),e.style.cursor="pointer",null!==e.originalClass&&e.setAttribute("class",e.originalClass))},l=()=>{a(!0)},v=()=>{a(!1)};o.addEventListener("submitstart",n),o.addEventListener("submitsuccess",l),o.addEventListener("submiterror",v),o.submit()}}};
EOT;
