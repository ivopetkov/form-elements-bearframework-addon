<?php

/*
 * Form elements addon for Bear Framework
 * https://github.com/ivopetkov/form-elements-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
for(var elements=document.body.querySelectorAll("[data-form-element-type='file']"),i=0;i<elements.length;i++)(function(a){if("undefined"===typeof a.dataFormAPISet){a.dataFormAPISet=!0;a.getValue=function(){};a.setValue=function(b){};a.setVisibility=function(b){a.setAttribute("data-form-element-visibility",b?"1":"0")};var c=a.querySelector("[data-form-element-component='clear-button']"),g=c.nextSibling,h=a.querySelectorAll("input"),d=h[0],e=h[1],f=function(){0===d.files.length?(g.firstChild.innerText=0===e.value.length?"CHOOSE_TEXT_TO_REPLACE":"",c.style.display="none"):(g.firstChild.innerText=d.files[0].name,c.style.display="inline-block")};c.addEventListener("click",function(b){b.stopPropagation();b.preventDefault();d.value="";e.value="";f()},!1);d.addEventListener("change",f,!1);e.addEventListener("change",f,!1)}})(elements[i]);
EOT;
