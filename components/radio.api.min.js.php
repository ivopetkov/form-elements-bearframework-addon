<?php

/*
 * Form elements addon for Bear Framework
 * https://github.com/ivopetkov/form-elements-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
for(var elements=document.body.querySelectorAll("[data-form-element-type='radio']"),i=0;i<elements.length;i++)!function(e){if(void 0===e.dataFormAPISet){e.dataFormAPISet=!0;var t=e.querySelector("input");e.isChecked=function(){return t.checked},e.getValue=function(){return t.value},e.setValue=function(e){t.value=e},e.check=function(){t.checked||(t.checked=!0,t.dispatchEvent(new Event("change",{bubbles:!0})))},e.uncheck=function(){t.checked&&(t.checked=!1,t.dispatchEvent(new Event("change",{bubbles:!0})))},e.setVisibility=function(t){e.setAttribute("data-form-element-visibility",t?"1":"0")};var n=function(n){for(var c=function(n){t!==n&&(e.uncheck(),n.parentNode.parentNode.check(),n.nextSibling.focus())},o=document.querySelectorAll('[name="'+t.name+'"]'),a=o.length,r=0;r<a;r++)o[r]===t&&(n?r>0&&c(o[r-1]):void 0!==o[r+1]&&c(o[r+1]))},c=function(e,t){e.setAttribute("tabindex",t)};t.addEventListener("change",(function(){for(var e=document.body.querySelectorAll("[data-form-element-type='radio'] input[name='"+t.name+"']"),n=0;n<e.length;n++){var o=e[n];c(o,o.checked?"0":"-1")}})),t.focus=function(){t.nextSibling.focus()},e.querySelector('[data-form-element-component="label"]').addEventListener("keydown",(function(e){var t=e.keyCode;37===t||38===t?(e.preventDefault(),n(!0)):39!==t&&40!==t||(e.preventDefault(),n(!1))}));for(var o=document.body.querySelectorAll("[data-form-element-type='radio'] input[name='"+t.name+"']"),a=!1,r=0;r<o.length;r++){var i=o[r];i.checked&&(a=!0,c(i,"0"))}a||c(o[0],"0")}}(elements[i]);
EOT;
